#!/bin/bash

# osm2pgrouting requires xml format

# See:
#   https://wiki.openstreetmap.org/wiki/Osmosis
#   https://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage_0.47

set -e
set -a

# https://github.com/pgRouting/osm2pgrouting#tips

cd "$( dirname "${BASH_SOURCE[0]}" )"

# Upstate
osmosis \
	--read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
	--bounding-box \
      completeWays=yes completeRelations=yes \
      top=46.408 right=-67.159 bottom=41.4129 left=-75.7835 \
	--write-xml file=./data/new-york.upstate.1.osm

osmosis \
	--read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
	--bounding-box \
      completeWays=yes completeRelations=yes \
      top=46.408 right=-75.7835 bottom=41.4129 left=-84.408 \
	--write-xml file=./data/new-york.upstate.2.osm

# Downstate (Long Island)
osmosis \
	--read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
	--bounding-box \
      completeWays=yes completeRelations=yes \
      top=41.4129 right=-74.1254 bottom=38.942 left=-79.2667 \
	--write-xml file=./data/new-york.downstate-east.1.osm

osmosis \
	--read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
	--bounding-box \
      completeWays=yes completeRelations=yes \
      top=41.4129 right=-79.2667 bottom=38.942 left=-84.408 \
	--write-xml file=./data/new-york.downstate-east.2.osm



osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=41.4129 right=-67.159 bottom=40.79518 left=-68.9006 \
  --write-xml file=./data/new-york.downstate-west.1.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=41.4129 right=-68.9006 bottom=40.79518 left=-70.6422 \
  --write-xml file=./data/new-york.downstate-west.2.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=41.4129 right=-70.6422 bottom=40.79518 left=-72.3838 \
  --write-xml file=./data/new-york.downstate-west.3.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=41.4129 right=-72.3838 bottom=40.79518 left=-74.1254 \
  --write-xml file=./data/new-york.downstate-west.4.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.79518 right=-67.159 bottom=40.17745 left=-68.9006 \
  --write-xml file=./data/new-york.downstate-west.5.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.79518 right=-68.9006 bottom=40.17745 left=-70.6422 \
  --write-xml file=./data/new-york.downstate-west.6.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.79518 right=-70.6422 bottom=40.17745 left=-72.3838 \
  --write-xml file=./data/new-york.downstate-west.7.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.79518 right=-72.3838 bottom=40.17745 left=-74.1254 \
  --write-xml file=./data/new-york.downstate-west.8.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.17745 right=-67.159 bottom=39.55973 left=-68.9006 \
  --write-xml file=./data/new-york.downstate-west.9.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.17745 right=-68.9006 bottom=39.55973 left=-70.6422 \
  --write-xml file=./data/new-york.downstate-west.10.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.17745 right=-70.6422 bottom=39.55973 left=-72.3838 \
  --write-xml file=./data/new-york.downstate-west.11.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=40.17745 right=-72.3838 bottom=39.55973 left=-74.1254 \
  --write-xml file=./data/new-york.downstate-west.12.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=39.55973 right=-67.159 bottom=38.942 left=-68.9006 \
  --write-xml file=./data/new-york.downstate-west.13.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=39.55973 right=-68.9006 bottom=38.942 left=-70.6422 \
  --write-xml file=./data/new-york.downstate-west.14.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=39.55973 right=-70.6422 bottom=38.942 left=-72.3838 \
  --write-xml file=./data/new-york.downstate-west.15.osm

osmosis \
  --read-pbf file=./data/new-york.osm.pbf \
  --tf accept-ways highway=* \
  --bounding-box \
      completeWays=yes completeRelations=yes \
      top=39.55973 right=-72.3838 bottom=38.942 left=-74.1254 \
  --write-xml file=./data/new-york.downstate-west.16.osm
