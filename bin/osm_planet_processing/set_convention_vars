#!/bin/bash

# To guarantee consitent convention-based variable values, this script serves as
#   the single point of truth for OSM processing file names and paths.

set -e

if [ ! -z "$OSM_DATA_DIR" ]; then
  export OSM_PLANET_FILE_PATH="$OSM_DATA_DIR/$OSM_PLANET_FILE_NAME"
  export NYS_POLY_FILE_PATH="$OSM_DATA_DIR/new-york.poly"

fi

if [ ! -z "$OSM_PLANET_VERSION" ]; then
  export OSM_PLANET_VERSION_URL="https://ftpmirror.your.org/pub/openstreetmap/pbf/planet-$OSM_PLANET_VERSION.osm.pbf"
  export OSM_PLANET_VERSION_MD5SUM_URL="$OSM_PLANET_VERSION_URL.md5"

  export OSM_PLANET_FILE_NAME="planet-$OSM_PLANET_VERSION.osm.pbf"
  export OSM_NYS_FILE_NAME="newy-york-$OSM_PLANET_VERSION.osm.pbf"
fi

if [ ! -z  "$OSM_DATA_DIR" ] && [ ! -z "$OSM_PLANET_FILE_NAME" ]; then
  export OSM_PLANET_FILE_PATH="$OSM_DATA_DIR/$OSM_PLANET_FILE_NAME"
  export OSM_NEW_YORK_FILE_PATH="$OSM_DATA_DIR/$OSM_NYS_FILE_NAME"
fi
