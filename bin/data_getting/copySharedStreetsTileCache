#!/bin/bash

set -e

if [ "$#" -ne 2 ]; then
  (>&2 echo 'USAGE: You must provide two positional CLI argument:')
  (>&2 echo '         1st: the SharedStreets tile cache directory')
  (>&2 echo '         2nd: the directory into which to copy the cached tiles')
  exit 1
fi

SHST_TILES_CACHE_DIR="$1"
TILES_DIR="$2"

if [ ! -d "$SHST_TILES_CACHE_DIR" ]; then
  echo "ERROR: No sharedstreets_tiles cache directory at $SHST_TILES_CACHE_DIR"
  exit 1
fi

mkdir -p "$TILES_DIR"

cp --no-clobber "$SHST_TILES_CACHE_DIR/"* "$TILES_DIR"

